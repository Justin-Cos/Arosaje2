<!-- menu.component.html -->

<p-toolbar class="sticky flex-col overflow-hidden" [style]="{'height': '10vh'}" id="header">
  <div class="p-toolbar-group-start d-flex align-items-center">
    <button (click)="menuVertical()" class="icone_nav "><i class="fa-solid fa-bars"></i></button>
    <span class="title_nav">Arosaje</span>
    <p-image></p-image>
  </div>

  <div *ngIf="authService.isLoggedIn()" routerLink="/profile/{{authService.getUserId()}}"  class="p-toolbar-group-end d-flex align-items-center">
    <p-avatar image="{{ApiService.baseUrl}}/uploads/profile_pictures/{{authService.getProfilePic()}}" shape="circle" size="xlarge" />
    <span class="text_nav">{{ authService.getUsername()}}</span>
  </div>
</p-toolbar>

<div class="menu-lateral color-sec top-fix w-0 h-100 transition-rapide-horiz premier-plan" id="navbar-laterale">

  <ul class="overflow-hidden">

    <div class="search_menu d-flex justify-content-center align-items-center overflow-hidden">
    <span class="p-input-icon-left search_size">
        <i class="fa-solid fa-magnifying-glass"></i>
        <form [formGroup]="searchForm" (ngSubmit)="onSearchSubmit()">
          <input pInputText type="text" class="p-inputtext-lg search_txt" placeholder="Recherche utilisateur" formControlName="search"/>
        </form>
        <div class="dropdown" *ngIf="dropdownOpen" aria-labelledby="dropdownMenuButton">
            <a *ngFor="let user of users" class="dropdown-item" routerLink="/profile/{{user.user_id}}">{{user.username}}</a>
        </div>
      </span>
  </div>

    <li *ngIf="authService.isLoggedIn()" class="options-menu-lateral li-clean"><a class="liens-menu-lateral a-clean" routerLink="/home">Voir les annonces</a></li>
    <li *ngIf="!authService.isLoggedIn()" class="options-menu-lateral li-clean"><a class="liens-menu-lateral a-clean" routerLink="/login">Se connecter</a></li>
    <li *ngIf="!authService.isLoggedIn()" class="options-menu-lateral li-clean"><a class="liens-menu-lateral a-clean" routerLink="/register">Se créer un compte</a></li>
    <li *ngIf="authService.isLoggedIn()" class="options-menu-lateral li-clean"><a class="liens-menu-lateral a-clean" routerLink="/map">Carte</a></li>
    <li *ngIf="authService.isLoggedIn()" class="options-menu-lateral li-clean"><a class="liens-menu-lateral a-clean" routerLink="/profile/{{authService.getUserId()}}">Mon profil</a></li>
    <li *ngIf="authService.isLoggedIn()" class="options-menu-lateral li-clean" style="cursor: pointer"><a class="liens-menu-lateral a-clean" (click)="this.authService.logout();">Se déconnecter</a></li>

  </ul>
</div>

