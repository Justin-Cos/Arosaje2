CREATE TABLE `Users` (`user_id` INTEGER PRIMARY KEY AUTOINCREMENT, `username` VARCHAR(255) NOT NULL UNIQUE, `email` VARCHAR(255) NOT NULL UNIQUE, `password` TEXT NOT NULL, `profile_picture` TEXT NOT NULL, `bio` TEXT, `role` TEXT);
CREATE TABLE `PlantsTypes` (`plant_type_id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` TEXT NOT NULL);
CREATE TABLE `Plants` (`plant_id` INTEGER PRIMARY KEY AUTOINCREMENT, `plant_type` INTEGER NOT NULL REFERENCES `PlantsTypes` (`plant_type_id`) ON DELETE NO ACTION ON UPDATE CASCADE, `owner` INTEGER NOT NULL REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `name` TEXT NOT NULL, `image` TEXT, `indoor` TINYINT(1) NOT NULL);
CREATE TABLE `Addresses` (`address_id` INTEGER PRIMARY KEY AUTOINCREMENT, `owner` INTEGER NOT NULL REFERENCES `Users` (`user_id`), `longitude` DECIMAL NOT NULL, `latitude` DECIMAL NOT NULL, `country` TEXT NOT NULL, `city` TEXT NOT NULL, `address` TEXT NOT NULL, `zip_code` INTEGER NOT NULL);
CREATE TABLE `CareSessions` (`session_id` INTEGER PRIMARY KEY AUTOINCREMENT, `plant` INTEGER NOT NULL REFERENCES `Plants` (`plant_id`) ON DELETE CASCADE ON UPDATE CASCADE, `caretaker` INTEGER REFERENCES `Users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `location` INTEGER NOT NULL REFERENCES `Addresses` (`address_id`) ON DELETE CASCADE ON UPDATE CASCADE, `details` TEXT, `date_start` DATETIME NOT NULL, `date_end` DATETIME NOT NULL);
CREATE TABLE `Comments` (`id_comment` INTEGER PRIMARY KEY AUTOINCREMENT, `care_session` INTEGER REFERENCES `CareSessions` (`session_id`) ON DELETE CASCADE ON UPDATE CASCADE, `author` INTEGER NOT NULL REFERENCES `Users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `author_role` TEXT NOT NULL, `date` INTEGER NOT NULL, `title` VARCHAR(255), `content` TEXT, `image` TEXT);
